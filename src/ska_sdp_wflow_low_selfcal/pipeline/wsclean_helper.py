""" This module contains commands to use WSClean """
from subprocess import check_call

common_args = [
    "-no-update-model-required",
    "-save-source-list",
    "-local-rms",
    "-join-channels",
    "-apply-facet-beam",
    "-log-time",
    "-gridder",
    "wgridder",
    "-temp-dir",
    "/tmp/64ltgyh9",
    "-parallel-deconvolution",
    "2048",
    "-pol",
    "I",
    "-mgain",
    "0.85",
    "-multiscale-scale-bias",
    "0.8",
    "-fit-spectral-pol",
    "3",
    "-auto-threshold",
    "1.0",
    "-local-rms-window",
    "50",
    "-local-rms-method",
    "rms-with-min",
    "-facet-beam-update",
    "120",
    "-auto-mask",
    "5.0",
    "-scale",
    "0.00034722222222222224",
    "-channels-out",
    "4",
    "-deconvolution-channels",
    "4",
    "-idg-mode",
    "cpu",
    "-fits-mask",
    "sector_1_mask.fits",
    "-maxuv-l",
    "1000000.0",
    "-minuv-l",
    "0.0",
    "-multiscale",
    "-name",
    "sector_1",
    "-deconvolution-threads",
    "16",
    "-parallel-gridding",
    "16",
    "-j",
    "40",
    "-facet-regions",
    "facets.reg",
    "-taper-gaussian",
    "0.0",
    "-size",
    "24394",
    "24394",
    "-mem",
    "90.0",
    "-niter",
    "6666666",
    "-nmiter",
    "6",
    "-weight",
    "briggs",
    "-0.5",
    "-apply-facet-solutions",
    "fast_phase_0.h5parm",
    "phase000",
    # "/tmp/upgujgmu/stg1acec759-9087-4e32-ab80-7fcb82955291/midbands.ms.mjd5020557063_field.sector_1.prep",
    # "/tmp/upgujgmu/stg2af483a4-ad15-4717-b0ba-53b26dae5c40/midbands.ms.mjd5020559947_field.sector_1.prep",
    # "/tmp/upgujgmu/stg5a25b09f-1017-4da0-abc2-c85a9717a558/midbands.ms.mjd5020562823_field.sector_1.prep",
    # "/tmp/upgujgmu/stgc6ad4ae4-16e4-4f65-8e4f-c36dc9e544f0/midbands.ms.mjd5020565707_field.sector_1.prep",
    # "/tmp/upgujgmu/stgdd4d4e28-6292-4d96-a597-6e315c5a10fe/midbands.ms.mjd5020568583_field.sector_1.prep",
    # "/tmp/upgujgmu/stgd1a715eb-5234-4456-be43-9950f64b97bb/midbands.ms.mjd5020571459_field.sector_1.prep",
    # "/tmp/upgujgmu/stg06978b90-3698-4b65-bb79-b70ab25aa4af/midbands.ms.mjd5020574343_field.sector_1.prep",
    # "/tmp/upgujgmu/stg75cf4367-31fb-4c19-856b-1a64079da418/midbands.ms.mjd5020577219_field.sector_1.prep",
    # "/tmp/upgujgmu/stge0ae543d-4f66-42d9-8a58-5578af1c5d7e/midbands.ms.mjd5020580103_field.sector_1.prep",
    # "/tmp/upgujgmu/stg218f562f-b080-4734-988c-8769c4cec65a/midbands.ms.mjd5020582979_field.sector_1.prep
]


def run_wsclean(msin):
    """Run WSClean"""
    check_call(
        [
            "/home/csalvoni/scratch/schaap/wsclean/build/wsclean",
        ]
        + common_args
        + [msin]
    )
